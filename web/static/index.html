<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV Navigation</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="i5.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <div class="electric-bg">
        <div class="electric-particle"></div>
        <div class="electric-particle"></div>
        <div class="electric-particle"></div>
        <div class="electric-particle"></div>
        <div class="electric-particle"></div>
    </div>
    
    <div class="container">
        <div class="header">
            <div class="header-icon">
                <i data-feather="zap"></i>
            </div>
            <h1>EV Navigation System</h1>
            <p class="subtitle">Smart range estimation & charging station finder</p>
        </div>
        
        <form id="inputForm" autocomplete="off">
            <div class="input-section">
                <div class="section-header">
                    <i data-feather="map-pin"></i>
                    <span>Starting Location</span>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="startLat">Latitude</label>
                        <input type="number" id="startLat" name="startLat" step="any" required>
                    </div>
                    <div class="input-wrapper">
                        <label for="startLon">Longitude</label>
                        <input type="number" id="startLon" name="startLon" step="any" required>
                    </div>
                </div>
            </div>

            <div class="input-section">
                <div class="section-header">
                    <i data-feather="target"></i>
                    <span>Destination</span>
                </div>
                <div class="input-group">
                    <div class="input-wrapper">
                        <label for="latitude">Latitude</label>
                        <input type="number" id="latitude" name="latitude" step="any" required>
                    </div>
                    <div class="input-wrapper">
                        <label for="longitude">Longitude</label>
                        <input type="number" id="longitude" name="longitude" step="any" required>
                    </div>
                </div>
            </div>
            
            <button type="button" id="fillTestData" class="secondary-btn">
                <i data-feather="shuffle"></i>
                Fill Test Data
            </button>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const testData = [
                        {startLat: 22.996439, startLon: 72.480712, latitude: 23.103606, longitude: 72.662733},
                        {startLat: 23.038086, startLon: 72.484267, latitude: 22.992355, longitude: 72.660209},
                        {startLat: 23.129072, startLon: 72.526253, latitude: 22.957491, longitude: 72.647241},
                        {startLat: 22.933720, startLon: 72.553787, latitude: 23.119984, longitude: 72.600535}
                    ];
                    const locations = [
                        {Lat: 22.996439, Lon: 72.480712},
                        {Lat: 23.103606, Lon: 72.662733},
                        {Lat: 23.038086, Lon: 72.484267},
                        {Lat: 22.992355, Lon: 72.660209},
                        {Lat: 23.129072, Lon: 72.526253},
                        {Lat: 22.957491, Lon: 72.647241},
                        {Lat: 22.933720, Lon: 72.553787},
                        {Lat: 23.119984, Lon: 72.600535}
                    ]
                    document.getElementById('fillTestData').addEventListener('click', function() {
                        const randomIndex = Math.floor(Math.random() * testData.length);
                        // const startIndex = Math.floor(Math.random() * locations.length);
                        // let destIndex;
                        // do {
                        //     destIndex = Math.floor(Math.random() * locations.length);
                        // } while (destIndex === startIndex); 
                        document.getElementById('startLat').value = testData[randomIndex].startLat;
                        document.getElementById('startLon').value = testData[randomIndex].startLon;
                        document.getElementById('latitude').value = testData[randomIndex].latitude;
                        document.getElementById('longitude').value = testData[randomIndex].longitude;
                    });

                });
            </script>
            <div style="width: 100%; display: flex; justify-content: center; align-items: center;">
                <button type="button" id="getBMSData"  style="width: 70%;" class="primary-btn">
                    <i data-feather="battery"></i>
                    Get BMS Data
                </button>
            </div>
            

            <div id="bmsData" style="display: none;">
                <div class="section-header bms-header">
                    <i data-feather="activity"></i>
                    <span>BMS Data</span>
                </div>
                
                <div class="bms-grid">
                    <div class="input-wrapper">
                        <label for="Re">Re (Ω)</label>
                        <input type="number" id="Re" name="Re" step="any" readonly>
                    </div>
                    <div class="input-wrapper">
                        <label for="Rct">Rct (Ω)</label>
                        <input type="number" id="Rct" name="Rct" step="any" readonly>
                    </div>
                    <div class="input-wrapper">
                        <label for="temperature">Temperature (°C)</label>
                        <input type="number" id="temperature" name="temperature" step="any" readonly>
                    </div>
                    <div class="input-wrapper">
                        <label for="SoC">SoC (%)</label>
                        <input type="number" id="SoC" name="SoC" step="any" readonly>
                    </div>
                </div>
            </div>
            <div style="width: 100%; display: flex; justify-content: center; align-items: center;">
                <button id="estimateB" type="submit" style="display: none; width: 70%;" class="estimate-btn"  >
                    <i data-feather="play"></i>
                    Run Estimation
                </button>
            </div>
        </form>

        <div id="loadingContainer">
            <div id="loading"></div>
        </div>

        <div id="results">
            <div class="results-header">
                <i data-feather="bar-chart-2"></i>
                <h2>Results</h2>
            </div>
            <div class="results-placeholder">
                <i data-feather="info"></i>
                <p>Results will appear here after running estimation</p>
            </div>
        </div>
    </div>

    <script src="main.js"></script>
    <script>
        feather.replace();
    </script>
</body>
</html>
